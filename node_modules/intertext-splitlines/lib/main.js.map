{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n'use strict'\n\n\n############################################################################################################\nCND                       = require 'cnd'\nbadge                     = 'INTERTEXT/SPLITLINES'\ndebug                     = CND.get_logger 'debug',     badge\nurge                      = CND.get_logger 'urge',      badge\nwarn                      = CND.get_logger 'warn',      badge\n@types                    = new ( require 'intertype' ).Intertype()\n{ isa\n  validate\n  validate_optional\n  type_of }               = @types.export()\n\n#-----------------------------------------------------------------------------------------------------------\n@types.declare 'sl_settings', tests:\n  'x is an object':                     ( x ) -> @isa.object x\n  'x.?splitter is a nonempty_text or a nonempty buffer':  ( x ) ->\n    return true unless x.splitter?\n    return ( @isa.nonempty_text x.splitter ) or ( ( @isa.buffer x.splitter ) and x.length > 0 )\n  ### TAINT use `encoding` for better flexibility ###\n  'x.?decode is a boolean':             ( x ) -> @isa_optional.boolean x.decode\n  'x.?skip_empty_last is a boolean':    ( x ) -> @isa_optional.boolean x.skip_empty_last\n  'x.?keep_newlines is a boolean':      ( x ) -> @isa_optional.boolean x.keep_newlines\n\n#-----------------------------------------------------------------------------------------------------------\ndefaults =\n  splitter:         '\\n'\n  decode:           true\n  skip_empty_last:  true\n  keep_newlines:    false\n\n#-----------------------------------------------------------------------------------------------------------\n@new_context = ( settings ) ->\n  validate_optional.sl_settings settings\n  settings            = { defaults..., settings..., }\n  settings.offset     = 0\n  settings.lastMatch  = 0\n  settings.splitter   = ( Buffer.from settings.splitter ) if isa.text settings.splitter\n  return { collector: null, settings..., }\n\n#-----------------------------------------------------------------------------------------------------------\ndecode = ( me, data ) ->\n  return data unless me.decode\n  return data.toString 'utf-8'\n\n#-----------------------------------------------------------------------------------------------------------\n@walk_lines = ( me, d ) ->\n  ### thx to https://github.com/maxogden/binary-split/blob/master/index.js ###\n  validate.buffer d\n  me.offset     = 0\n  me.lastMatch  = 0\n  delta         = if me.keep_newlines then me.splitter.length else 0\n  if me.collector?\n    d             = Buffer.concat [ me.collector, d, ]\n    me.offset     = me.collector.length\n    me.collector  = null\n  loop\n    idx = d.indexOf me.splitter, me.offset - me.splitter.length + 1\n    if idx >= 0 and idx < d.length\n      yield decode me, d.slice me.lastMatch, idx + delta\n      me.offset    = idx + me.splitter.length\n      me.lastMatch = me.offset\n    else\n      me.collector  = d.slice me.lastMatch\n      break\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@flush = ( me ) ->\n  if me.collector?\n    line = decode me, me.collector\n    yield line unless me.skip_empty_last and line.length is 0\n    me.collector = null\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@splitlines = ( settings, buffers... ) ->\n  buffers = buffers.flat Infinity\n  switch type = type_of settings\n    when 'object', 'null' then null\n    when 'buffer'         then buffers.unshift settings; settings = null\n    when 'list'           then buffers.splice 0, 0, ( settings.flat Infinity )...; settings = null\n    else throw new Error \"^splitlines@26258^ expected null, an object, a buffer or a list, got a #{type}\"\n  ctx = @new_context settings\n  R   = []\n  for buffer in buffers\n    for line from @walk_lines ctx, buffer\n      R.push line\n  for line from @flush ctx\n    R.push line\n  return R\n\n\n\n\n"
  ]
}